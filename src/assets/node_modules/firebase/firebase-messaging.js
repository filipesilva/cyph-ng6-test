try{webpackJsonpFirebase([3],{120:function(e,t,n){n(121)},121:function(e,t,n){"";function o(){var e=indexedDB.open(E);e.onerror=function(e){},e.onsuccess=function(t){!function(e){if(e.objectStoreNames.contains(T)){var t=e.transaction(T).objectStore(T),n=new l,o=t.openCursor();o.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},o.onsuccess=function(){var t=o.result;if(t){var r=t.value;n.deleteToken(r.fcmSenderId,r.fcmToken,r.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(E)}}}(e.result)}}function r(){}function i(e){var t={Messaging:B};e.INTERNAL.registerService("messaging",function(e){return self&&"ServiceWorkerGlobalScope"in self?new L(e):new B(e)},t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c=n(2),a=n(0),u={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},d={codes:u,map:((s={})[u.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",s[u.AVAILABLE_IN_SW]="This method is available in a service worker context.",s["should-be-overriden"]="This method should be overriden by extended classes.",s["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",s["permission-default"]="The required permissions were not granted and dismissed instead.",s["permission-blocked"]="The required permissions were not granted and blocked instead.",s["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",s["notifications-blocked"]="Notifications have been blocked.",s[u.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",s["sw-registration-expected"]="A service worker registration was the expected input.",s["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",s["invalid-saved-token"]="Unable to access details of the saved token.",s["sw-reg-redundant"]="The service worker being used for push was made redundant.",s["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",s["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",s["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",s["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$message}",s["token-update-failed"]="A problem occured while updating the user from FCM: {$message}",s["token-update-no-token"]="FCM returned no token when updating the user to push.",s["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",s["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",s["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",s["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",s["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",s["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",s["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",s["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",s["failed-to-delete-token"]="Unable to delete the currently saved token.",s["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",s["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",s["bad-scope"]="The service worker scope must be a string with at least one character.",s["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",s["bad-subscription"]="The subscription must be a valid PushSubscription.",s["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",s["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",s["failed-delete-vapid-key"]="The VAPID key could not be deleted.",s["invalid-public-vapid-key"]="The public VAPID key must be a string.",s[u.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",s)},f=function(){function e(e,t){this.e=new a.ErrorFactory("messaging","Messaging",d.map),this.t=e,this.r=t,this.o=null,this.TRANSACTION_READ_WRITE="readwrite"}return e.prototype.openDatabase=function(){var e=this;return this.o?this.o:(this.o=new Promise(function(t,n){var o=indexedDB.open(e.t,e.r);o.onerror=function(e){n(e.target.error)},o.onsuccess=function(e){t(e.target.result)},o.onupgradeneeded=function(t){try{var o=t.target.result;e.onDBUpgrade(o,t)}catch(e){o.close(),n(e)}}}),this.o)},e.prototype.closeDatabase=function(){var e=this;return Promise.resolve().then(function(){if(e.o)return e.o.then(function(t){t.close(),e.o=null})})},e.prototype.onDBUpgrade=function(e,t){throw this.e.create(d.codes.SHOULD_BE_INHERITED)},e}(),h=function(e){return function(e){var t=new Uint8Array(e);return window.btoa(String.fromCharCode.apply(null,t))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},p=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),_={DEFAULT_PUBLIC_VAPID_KEY:p,SUBSCRIPTION_DETAILS:{userVisibleOnly:!0,applicationServerKey:p},ENDPOINT:"https://fcm.googleapis.com"},l=function(){function e(){this.e=new a.ErrorFactory("messaging","Messaging",d.map)}return e.prototype.getToken=function(e,t,n){var o=this,r=h(t.getKey("p256dh")),i=h(t.getKey("auth")),s="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+r+"&encryption_auth="+i;n!==_.DEFAULT_PUBLIC_VAPID_KEY&&(s+="&application_pub_key="+h(n));var c=new Headers;return c.append("Content-Type","application/x-www-form-urlencoded"),fetch(_.ENDPOINT+"/fcm/connect/subscribe",{method:"POST",headers:c,body:s}).then(function(e){return e.json()}).catch(function(){throw o.e.create(d.codes.TOKEN_SUBSCRIBE_FAILED)}).then(function(e){var t=e;if(t.error){var n=t.error.message;throw o.e.create(d.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!t.token)throw o.e.create(d.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!t.pushSet)throw o.e.create(d.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:t.token,pushSet:t.pushSet}})},e.prototype.updateToken=function(e,t,n,o,r){var i=this,s=h(o.getKey("p256dh")),c=h(o.getKey("auth")),a="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+o.endpoint+"&encryption_key="+s+"&encryption_auth="+c;r!==_.DEFAULT_PUBLIC_VAPID_KEY&&(a+="&application_pub_key="+h(r));var u,f=new Headers;return f.append("Content-Type","application/x-www-form-urlencoded"),fetch(_.ENDPOINT+"/fcm/connect/subscribe",{method:"POST",headers:f,body:a}).then(function(e){return u=e,e.json()}).catch(function(){throw i.e.create(d.codes.TOKEN_UPDATE_FAILED)}).then(function(e){if(!u.ok){var t=e.error.message;throw i.e.create(d.codes.TOKEN_UPDATE_FAILED,{message:t})}if(!e.token)throw i.e.create(d.codes.TOKEN_UPDATE_NO_TOKEN);return e.token})},e.prototype.deleteToken=function(e,t,n){var o=this,r="authorized_entity="+e+"&token="+t+"&pushSet="+n,i=new Headers;return i.append("Content-Type","application/x-www-form-urlencoded"),fetch(_.ENDPOINT+"/fcm/connect/unsubscribe",{method:"POST",headers:i,body:r}).then(function(e){if(!e.ok)return e.json().then(function(e){if(e.error){var t=e.error.message;throw o.e.create(d.codes.TOKEN_UNSUBSCRIBE_FAILED,{message:t})}},function(e){throw o.e.create(d.codes.TOKEN_UNSUBSCRIBE_FAILED)})})},e}(),E="undefined",T="fcm_token_object_Store",g="fcm_token_details_db",S=2;r.prototype.fcmToken,r.prototype.swScope,r.prototype.vapidKey,r.prototype.subscription,r.prototype.fcmSenderId,r.prototype.fcmPushSet;var b=function(e){function t(){return e.call(this,g,S)||this}return c.__extends(t,e),t.prototype.onDBUpgrade=function(e,t){if(t.oldVersion<1){var n=e.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"});n.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),n.createIndex("fcmToken","fcmToken",{unique:!0})}t.oldVersion<2&&o()},t.prototype.n=function(e){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(t){return!e.fcmToken||"string"==typeof e.fcmToken&&0!==e.fcmToken.length?!e.swScope||"string"==typeof e.swScope&&0!==e.swScope.length?!e.vapidKey||e.vapidKey instanceof Uint8Array&&65===e.vapidKey.length?!e.subscription||e.subscription instanceof PushSubscription?!e.fcmSenderId||"string"==typeof e.fcmSenderId&&0!==e.fcmSenderId.length?!e.fcmPushSet||"string"==typeof e.fcmPushSet&&0!==e.fcmPushSet.length?[2]:[2,Promise.reject(this.e.create(d.codes.BAD_PUSH_SET))]:[2,Promise.reject(this.e.create(d.codes.BAD_SENDER_ID))]:[2,Promise.reject(this.e.create(d.codes.BAD_SUBSCRIPTION))]:[2,Promise.reject(this.e.create(d.codes.BAD_VAPID_KEY))]:[2,Promise.reject(this.e.create(d.codes.BAD_SCOPE))]:[2,Promise.reject(this.e.create(d.codes.BAD_TOKEN))]})})},t.prototype.getTokenDetailsFromToken=function(e){var t=this;return e?this.n({fcmToken:e}).then(function(){return t.openDatabase()}).then(function(t){return new Promise(function(n,o){var r=t.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(e);r.onerror=function(e){o(e.target.error)},r.onsuccess=function(e){var t=e.target.result?e.target.result:null;n(t)}})}):Promise.reject(this.e.create(d.codes.BAD_TOKEN))},t.prototype.getTokenDetailsFromSWScope=function(e){var t=this;return e?this.n({swScope:e}).then(function(){return t.openDatabase()}).then(function(t){return new Promise(function(n,o){var r=t.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").get(e);r.onerror=function(e){o(e.target.error)},r.onsuccess=function(e){var t=e.target.result?e.target.result:null;n(t)}})}):Promise.reject(this.e.create(d.codes.BAD_SCOPE))},t.prototype.saveTokenDetails=function(e){var t=this,n=e.swScope,o=e.vapidKey,r=e.subscription,i=e.fcmSenderId,s=e.fcmToken,c=e.fcmPushSet;return n?o?r?i?s?c?this.n({swScope:n,vapidKey:o,subscription:r,fcmSenderId:i,fcmToken:s,fcmPushSet:c}).then(function(){return t.openDatabase()}).then(function(e){var a={swScope:n,vapidKey:h(o),endpoint:r.endpoint,auth:h(r.getKey("auth")),p256dh:h(r.getKey("p256dh")),fcmSenderId:i,fcmToken:s,fcmPushSet:c,createTime:Date.now()};return new Promise(function(n,o){var r=e.transaction(["fcm_token_object_Store"],t.TRANSACTION_READ_WRITE).objectStore("fcm_token_object_Store").put(a);r.onerror=function(e){o(e.target.error)},r.onsuccess=function(e){n()}})}):Promise.reject(this.e.create(d.codes.BAD_PUSH_SET)):Promise.reject(this.e.create(d.codes.BAD_TOKEN)):Promise.reject(this.e.create(d.codes.BAD_SENDER_ID)):Promise.reject(this.e.create(d.codes.BAD_SUBSCRIPTION)):Promise.reject(this.e.create(d.codes.BAD_VAPID_KEY)):Promise.reject(this.e.create(d.codes.BAD_SCOPE))},t.prototype.deleteToken=function(e){var t=this;return"string"!=typeof e||0===e.length?Promise.reject(this.e.create(d.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(e).then(function(e){if(!e)throw t.e.create(d.codes.DELETE_TOKEN_NOT_FOUND);return t.openDatabase().then(function(n){return new Promise(function(o,r){var i=n.transaction(["fcm_token_object_Store"],t.TRANSACTION_READ_WRITE).objectStore("fcm_token_object_Store").delete(e.swScope);i.onerror=function(e){r(e.target.error)},i.onsuccess=function(n){0!==n.target.result?o(e):r(t.e.create(d.codes.FAILED_TO_DELETE_TOKEN))}})})})},t}(f),m="fcm_vapid_details_db",I=1,D=function(e){function t(){return e.call(this,m,I)||this}return c.__extends(t,e),t.prototype.onDBUpgrade=function(e){e.createObjectStore("fcm_vapid_object_Store",{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return"string"!=typeof e||0===e.length?Promise.reject(this.e.create(d.codes.BAD_SCOPE)):this.openDatabase().then(function(t){return new Promise(function(n,o){var r=t.transaction(["fcm_vapid_object_Store"]).objectStore("fcm_vapid_object_Store").get(e);r.onerror=function(){o(r.error)},r.onsuccess=function(){var e=r.result,t=null;e&&(t=e.vapidKey),n(t)}})})},t.prototype.saveVapidDetails=function(e,t){var n=this;if("string"!=typeof e||0===e.length)return Promise.reject(this.e.create(d.codes.BAD_SCOPE));if(null===t||65!==t.length)return Promise.reject(this.e.create(d.codes.BAD_VAPID_KEY));var o={swScope:e,vapidKey:t};return this.openDatabase().then(function(e){return new Promise(function(t,r){var i=e.transaction(["fcm_vapid_object_Store"],n.TRANSACTION_READ_WRITE).objectStore("fcm_vapid_object_Store").put(o);i.onerror=function(){r(i.error)},i.onsuccess=function(){t()}})})},t.prototype.deleteVapidDetails=function(e){var t=this;return this.getVapidFromSWScope(e).then(function(n){if(!n)throw t.e.create(d.codes.DELETE_SCOPE_NOT_FOUND);return t.openDatabase().then(function(o){return new Promise(function(r,i){var s=o.transaction(["fcm_vapid_object_Store"],t.TRANSACTION_READ_WRITE).objectStore("fcm_vapid_object_Store").delete(e);s.onerror=function(){i(s.error)},s.onsuccess=function(){0!==s.result?r(n):i(t.e.create(d.codes.FAILED_DELETE_VAPID_KEY))}})})})},t}(f),v="messagingSenderId",w=function(){function e(e){var t=this;if(this.e=new a.ErrorFactory("messaging","Messaging",d.map),!e.options[v]||"string"!=typeof e.options[v])throw this.e.create(d.codes.BAD_SENDER_ID);this.i=e.options[v],this.s=new b,this.a=new D,this.c=new l,this.app=e,this.INTERNAL={},this.INTERNAL.delete=function(){return t.delete()}}return e.prototype.getToken=function(){return c.__awaiter(this,void 0,void 0,function(){var e,t,n,o,r;return c.__generator(this,function(i){switch(i.label){case 0:return"granted"!==(e=this.u())?"denied"===e?[2,Promise.reject(this.e.create(d.codes.NOTIFICATIONS_BLOCKED))]:[2,Promise.resolve(null)]:[4,this._()];case 1:return t=i.sent(),[4,this.d()];case 2:return n=i.sent(),[4,this.getPushSubscription(t,n)];case 3:return o=i.sent(),[4,this.s.getTokenDetailsFromSWScope(t.scope)];case 4:return(r=i.sent())?[2,this.manageExistingToken(t,o,n,r)]:[2,this.getNewToken(t,o,n)]}})})},e.prototype.manageExistingToken=function(e,t,n,o){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(r){switch(r.label){case 0:return this.isTokenStillValid(t,n,o)?Date.now()<o.createTime+6048e5?[2,o.fcmToken]:[2,this.updateToken(e,t,n,o)]:[4,this.deleteToken(o.fcmToken)];case 1:return r.sent(),[2,this.getNewToken(e,t,n)]}})})},e.prototype.isTokenStillValid=function(e,t,n){return h(t)===n.vapidKey&&e.endpoint===n.endpoint&&h(e.getKey("auth"))===n.auth&&h(e.getKey("p256dh"))===n.p256dh},e.prototype.updateToken=function(e,t,n,o){return c.__awaiter(this,void 0,void 0,function(){var r,i,s;return c.__generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,6]),[4,this.c.updateToken(this.i,o.fcmToken,o.fcmPushSet,t,n)];case 1:return r=c.sent(),i={swScope:e.scope,vapidKey:n,subscription:t,fcmSenderId:this.i,fcmToken:r,fcmPushSet:o.fcmPushSet},[4,this.s.saveTokenDetails(i)];case 2:return c.sent(),[4,this.a.saveVapidDetails(e.scope,n)];case 3:return c.sent(),[2,r];case 4:return s=c.sent(),[4,this.deleteToken(o.fcmToken)];case 5:throw c.sent(),s;case 6:return[2]}})})},e.prototype.getNewToken=function(e,t,n){return c.__awaiter(this,void 0,void 0,function(){var o,r;return c.__generator(this,function(i){switch(i.label){case 0:return[4,this.c.getToken(this.i,t,n)];case 1:return o=i.sent(),r={swScope:e.scope,vapidKey:n,subscription:t,fcmSenderId:this.i,fcmToken:o.token,fcmPushSet:o.pushSet},[4,this.s.saveTokenDetails(r)];case 2:return i.sent(),[4,this.a.saveVapidDetails(e.scope,n)];case 3:return i.sent(),[2,o.token]}})})},e.prototype.deleteToken=function(e){var t=this;return this.s.deleteToken(e).then(function(e){return t.c.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)}).then(function(){return t._().then(function(e){if(e)return e.pushManager.getSubscription()}).then(function(e){if(e)return e.unsubscribe()})})},e.prototype._=function(){throw this.e.create(d.codes.SHOULD_BE_INHERITED)},e.prototype.d=function(){throw this.e.create(d.codes.SHOULD_BE_INHERITED)},e.prototype.requestPermission=function(){throw this.e.create(d.codes.AVAILABLE_IN_WINDOW)},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then(function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},e.prototype.useServiceWorker=function(e){throw this.e.create(d.codes.AVAILABLE_IN_WINDOW)},e.prototype.usePublicVapidKey=function(e){throw this.e.create(d.codes.AVAILABLE_IN_WINDOW)},e.prototype.onMessage=function(e,t,n){throw this.e.create(d.codes.AVAILABLE_IN_WINDOW)},e.prototype.onTokenRefresh=function(e,t,n){throw this.e.create(d.codes.AVAILABLE_IN_WINDOW)},e.prototype.setBackgroundMessageHandler=function(e){throw this.e.create(d.codes.AVAILABLE_IN_SW)},e.prototype.delete=function(){return Promise.all([this.s.closeDatabase(),this.a.closeDatabase()])},e.prototype.u=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.s},e.prototype.getVapidDetailsModel=function(){return this.a},e.prototype.getIIDModel=function(){return this.c},e}(),k={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},y=k,N={PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},A=function(e,t){return(n={})[k.TYPE_OF_MSG]=e,n[k.DATA]=t,n;var n},P="/firebase-messaging-sw.js",O="/firebase-cloud-messaging-push-scope",B=function(e){function t(t){var n=e.call(this,t)||this;return n.p=null,n.f=Object(a.createSubscribe)(function(e){n.p=e}),n.h=null,n.l=Object(a.createSubscribe)(function(e){n.h=e}),n.g,n.T,n.p=null,n.f=Object(a.createSubscribe)(function(e){n.p=e}),n.h=null,n.l=Object(a.createSubscribe)(function(e){n.h=e}),n.S(),n}return c.__extends(t,e),t.prototype.getToken=function(){var t=this;return this.b()?this.m().then(function(){return e.prototype.getToken.call(t)}):Promise.reject(this.e.create(d.codes.UNSUPPORTED_BROWSER))},t.prototype.m=function(){var e=this;if(this.T)return this.T;var t=document.querySelector('link[rel="manifest"]');return this.T=t?fetch(t.href).then(function(e){return e.json()}).catch(function(){}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.e.create(d.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.T},t.prototype.requestPermission=function(){return c.__awaiter(this,void 0,void 0,function(){var e=this;return c.__generator(this,function(t){return"granted"===Notification.permission?[2]:[2,new Promise(function(t,n){var o=function(o){return"granted"===o?t():n("denied"===o?e.e.create(d.codes.PERMISSION_BLOCKED):e.e.create(d.codes.PERMISSION_DEFAULT))},r=Notification.requestPermission(o);r&&r.then(o)})]})})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.e.create(d.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.g)throw this.e.create(d.codes.USE_SW_BEFORE_GET_TOKEN);this.g=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw this.e.create(d.codes.INVALID_PUBLIC_VAPID_KEY);if(void 0!==this.y)throw this.e.create(d.codes.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var t=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);return o}(e);if(65!==t.length)throw this.e.create(d.codes.PUBLIC_KEY_DECRYPTION_FAILED);this.y=t},t.prototype.onMessage=function(e,t,n){return this.f(e,t,n)},t.prototype.onTokenRefresh=function(e,t,n){return this.l(e,t,n)},t.prototype.v=function(e){var t=this,n=e.installing||e.waiting||e.active;return new Promise(function(o,r){if(n)if("activated"!==n.state)if("redundant"!==n.state){var i=function(){if("activated"===n.state)o(e);else{if("redundant"!==n.state)return;r(t.e.create(d.codes.SW_REG_REDUNDANT))}n.removeEventListener("statechange",i)};n.addEventListener("statechange",i)}else r(t.e.create(d.codes.SW_REG_REDUNDANT));else o(e);else r(t.e.create(d.codes.NO_SW_IN_REG))})},t.prototype._=function(){var e=this;return this.g?this.v(this.g):(this.g=null,navigator.serviceWorker.register(P,{scope:O}).catch(function(t){throw e.e.create(d.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(t){return e.v(t).then(function(){return e.g=t,t.update(),t})}))},t.prototype.d=function(){return this.y?Promise.resolve(this.y):Promise.resolve(_.DEFAULT_PUBLIC_VAPID_KEY)},t.prototype.S=function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[y.TYPE_OF_MSG]){var n=t.data;switch(n[y.TYPE_OF_MSG]){case N.PUSH_MSG_RECEIVED:case N.NOTIFICATION_CLICKED:var o=n[y.DATA];e.p&&e.p.next(o)}}},!1)},t.prototype.b=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},t}(w),L=function(e){function t(t){var n=e.call(this,t)||this;return self.addEventListener("push",function(e){return n.D(e)},!1),self.addEventListener("pushsubscriptionchange",function(e){return n.I(e)},!1),self.addEventListener("notificationclick",function(e){return n.k(e)},!1),n.w=null,n}return c.__extends(t,e),t.prototype.D=function(e){var t,n=this;try{t=e.data.json()}catch(e){return}var o=this.N().then(function(e){if(e){if(t.notification||n.w)return n.P(t)}else{var o=n.A(t);if(o){var r=o.title||"";return n._().then(function(e){return e.showNotification(r,o)})}if(n.w)return n.w(t)}});e.waitUntil(o)},t.prototype.I=function(e){var t=this,n=this._().then(function(e){return e.pushManager.getSubscription().then(function(e){}).catch(function(n){return t.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope).then(function(e){if(!e)throw n;return t.deleteToken(e.fcmToken).then(function(){throw n})})})}).catch(function(e){throw t.e.create(d.codes.UNABLE_TO_RESUBSCRIBE,{message:e})});e.waitUntil(n)},t.prototype.k=function(e){var t=this;if(e.notification&&e.notification.data&&e.notification.data.FCM_MSG){e.stopImmediatePropagation(),e.notification.close();var n=e.notification.data.FCM_MSG;if(n.notification){var o=n.notification.click_action;if(o){var r=this.O(o).then(function(e){return e?e.focus():self.clients.openWindow(o)}).then(function(e){if(e){n.notification,delete n.notification;var o=A(N.NOTIFICATION_CLICKED,n);return t.F(e,o)}});e.waitUntil(r)}}}},t.prototype.A=function(e){if(e&&"object"==typeof e.notification){var t,n=Object.assign({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw this.e.create(d.codes.BG_HANDLER_FUNCTION_EXPECTED);this.w=e},t.prototype.O=function(e){var t=new URL(e,self.location).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){for(var n=null,o=0;o<e.length;o++)if(new URL(e[o].url,self.location).href===t){n=e[o];break}return n||null})},t.prototype.F=function(e,t){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(n){return e?(e.postMessage(t),[2]):[2,Promise.reject(this.e.create(d.codes.NO_WINDOW_CLIENT_TO_MSG))]})})},t.prototype.N=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){return e.some(function(e){return"visible"===e.visibilityState})})},t.prototype.P=function(e){var t=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var o=A(N.PUSH_MSG_RECEIVED,e);return Promise.all(n.map(function(e){return t.F(e,o)}))})},t.prototype._=function(){return Promise.resolve(self.registration)},t.prototype.d=function(){var e=this;return this._().then(function(t){return e.getVapidDetailsModel().getVapidFromSWScope(t.scope)}).then(function(e){return null===e?_.DEFAULT_PUBLIC_VAPID_KEY:e})},t}(w),C=n(7);t.registerMessaging=i,i(C.firebase)}},[120])}catch(e){throw Error("Cannot instantiate firebase-messaging.js - be sure to load firebase-app.js first.")}